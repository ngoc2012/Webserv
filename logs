make[1]: Entering directory '/mnt/nfs/homes/minh-ngu/Webserv'
rm -f srcs/main.o srcs/Host.o srcs/Address.o srcs/Server.o srcs/Worker.o srcs/Request.o srcs/RequestHeader.o srcs/Response.o srcs/Header.o srcs/Configuration.o srcs/Location.o srcs/Cgi.o srcs/Listing.o srcs/Sessions.o srcs/ft/split_string.o srcs/ft/is_digit.o srcs/ft/itos.o srcs/ft/match_wildcard.o srcs/ft/file_extension.o srcs/ft/atoi_base.o srcs/ft/itoa_base.o srcs/ft/str_replace.o srcs/ft/to_upper.o srcs/ft/trim_string.o srcs/ft/timestamp.o
rm -f webserv
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/main.cpp -o srcs/main.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/Host.cpp -o srcs/Host.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/Address.cpp -o srcs/Address.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/Server.cpp -o srcs/Server.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/Worker.cpp -o srcs/Worker.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/Request.cpp -o srcs/Request.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/RequestHeader.cpp -o srcs/RequestHeader.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/Response.cpp -o srcs/Response.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/Header.cpp -o srcs/Header.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/Configuration.cpp -o srcs/Configuration.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/Location.cpp -o srcs/Location.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/Cgi.cpp -o srcs/Cgi.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/Listing.cpp -o srcs/Listing.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/Sessions.cpp -o srcs/Sessions.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/ft/split_string.cpp -o srcs/ft/split_string.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/ft/is_digit.cpp -o srcs/ft/is_digit.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/ft/itos.cpp -o srcs/ft/itos.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/ft/match_wildcard.cpp -o srcs/ft/match_wildcard.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/ft/file_extension.cpp -o srcs/ft/file_extension.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/ft/atoi_base.cpp -o srcs/ft/atoi_base.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/ft/itoa_base.cpp -o srcs/ft/itoa_base.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/ft/str_replace.cpp -o srcs/ft/str_replace.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/ft/to_upper.cpp -o srcs/ft/to_upper.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/ft/trim_string.cpp -o srcs/ft/trim_string.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 -g -c srcs/ft/timestamp.cpp -o srcs/ft/timestamp.o -I./includes
c++ -Wall -Wextra -Werror -std=c++98 srcs/main.o srcs/Host.o srcs/Address.o srcs/Server.o srcs/Worker.o srcs/Request.o srcs/RequestHeader.o srcs/Response.o srcs/Header.o srcs/Configuration.o srcs/Location.o srcs/Cgi.o srcs/Listing.o srcs/Sessions.o srcs/ft/split_string.o srcs/ft/is_digit.o srcs/ft/itos.o srcs/ft/match_wildcard.o srcs/ft/file_extension.o srcs/ft/atoi_base.o srcs/ft/itoa_base.o srcs/ft/str_replace.o srcs/ft/to_upper.o srcs/ft/trim_string.o srcs/ft/timestamp.o -o webserv
make[1]: Leaving directory '/mnt/nfs/homes/minh-ngu/Webserv'
make[1]: Entering directory '/mnt/nfs/homes/minh-ngu/Webserv'
rm -f srcs/main.o srcs/Host.o srcs/Address.o srcs/Server.o srcs/Worker.o srcs/Request.o srcs/RequestHeader.o srcs/Response.o srcs/Header.o srcs/Configuration.o srcs/Location.o srcs/Cgi.o srcs/Listing.o srcs/Sessions.o srcs/ft/split_string.o srcs/ft/is_digit.o srcs/ft/itos.o srcs/ft/match_wildcard.o srcs/ft/file_extension.o srcs/ft/atoi_base.o srcs/ft/itoa_base.o srcs/ft/str_replace.o srcs/ft/to_upper.o srcs/ft/trim_string.o srcs/ft/timestamp.o
make[1]: Leaving directory '/mnt/nfs/homes/minh-ngu/Webserv'
==1151078== Memcheck, a memory error detector
==1151078== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==1151078== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info
==1151078== Command: ./webserv
==1151078== 
[15:42:25] Listening at 127.0.0.1:4141 (socket : 3)
[15:42:25] Listening at 127.0.2.1:4242 (socket : 4)
worker
worker
worker
worker
worker
Listening socket is readable 4
[15:42:29] accept_client_sk 5
_body_buffer: 1024
_header_buffer: 8192
_buffer_size: 8192
Request init
read_header
receive_header: ret=95
============================================
`GET / HTTP/1.1
Host: 127.0.2.1:4242
User-Agent: Go-http-client/1.1
Accept-Encoding: gzip

`
Request header: 91
End receive header with status code 200
read_header: 95
parse_header
[15:42:29] GET / 127.0.2.1:4242
tester//index.html
Location found: /
_chunked: 0
Session id: 
End parse_header with status code 200
_fd_in = -1, _body_left = 0
No content length or the header receive has all the data body_left=0, content_length=0
end_request: socket=5 body size=0 file name=tester//index.html
write_header
===============
Response Header:
HTTP/1.1 200 OK
Content-Language: en
Content-Type: text/html
Content-Length: 105
Date: Tue, 20 Feb 2024 14:42:29 GMT
server: webserv


write_body 
Response _fd_out:6
105:<!DOCTYPE html>
<html lang="en">
  <head>
  </head>
  <body class="index">
    webserv
  </body>
</html>

write_body 
Response _fd_out:6
[15:42:29] 200 / GET
Request init
read_header
receive_header: ret=146
============================================
`POST / HTTP/1.1
Host: 127.0.2.1:4242
User-Agent: Go-http-client/1.1
Transfer-Encoding: chunked
Content-Type: test/file
`ccept-Encoding: gzip
read_header: 146
read_header
receive_header: ret=2
============================================
`POST / HTTP/1.1
Host: 127.0.2.1:4242
User-Agent: Go-http-client/1.1
Transfer-Encoding: chunked
Content-Type: test/file
Accept-Encoding: gzip
`
read_header: 2
read_header
receive_header: ret=4
============================================
`POST / HTTP/1.1
Host: 127.0.2.1:4242
User-Agent: Go-http-client/1.1
Transfer-Encoding: chunked
Content-Type: test/file
Accept-Encoding: gzip

0
`
Request header: 145
Body left: 3
Body: ``
End receive header with status code 200
read_header: 4
parse_header
[15:42:29] POST / 127.0.2.1:4242
Location found: /
_chunked: 1
Session id: 
Error: Content type test/file not found.
End parse_header with status code 405
_fd_in = 6, _body_left = 3
Write body left to fd_in, body_left=3
_chunked_data: (0)
 ``
No chunked data.
No content length or the header receive has all the data body_left=3, content_length=0
end_request: socket=5 body size=0 file name=
write_header
===============
Response Header:
HTTP/1.1 405 Method Not Allowed
Allow: GET
Content-Type: text/html
Content-Length: 145
Date: Tue, 20 Feb 2024 14:42:29 GMT
server: webserv


write_body 
[15:42:29] 405 / POST
Request init
read_header
receive_header: ret=2
============================================
`
`
read_header: 2
read_header
receive_header: ret=72
============================================
`
HEAD / HTTP/1.1
Host: 127.0.2.1:4242
User-Agent: Go-http-client/1.1
`
read_header: 72
read_header
receive_header: ret=1
============================================
`
HEAD / HTTP/1.1
Host: 127.0.2.1:4242
User-Agent: Go-http-client/1.1

`
Request header: 71
End receive header with status code 200
read_header: 1
parse_header
Error: Method unknown : 
[15:42:29] Error: Method or url error.
end_request: socket=5 body size=0 file name=
write_header
===============
Response Header:
HTTP/1.1 400 Bad Request
Content-Type: text/html
Content-Length: 131
Date: Tue, 20 Feb 2024 14:42:29 GMT
server: webserv


write_body 
[15:42:29] 400  UNKNOWN
Request init
read_header
receive_header: ret=0
read_header: 0
close_client_sk 5

